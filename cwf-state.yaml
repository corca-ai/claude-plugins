# cwf-state.yaml — Corca Workflow Framework project state
# Git-tracked, per-project. Read/written by cwf skills.

workflow:
  current_stage: build
  started_at: "2026-02-08"
  stages:
    clarify: "S0"
    refactor: "S1–S2"
    scaffold: "S3–S4.6"
    review: "S5a–S5b"
    build: "S6a–S10"
    harden: "S11–S13"
    launch: "S14–S15"

# Default artifact expectations for sessions
session_defaults:
  artifacts:
    always: [plan.md, lessons.md, retro.md]
    milestone: [next-session.md]

# Session history (populated by cwf:retro and cwf:handoff)
sessions:
  - id: S0
    title: "Clarify + master plan"
    dir: prompt-logs/260208-03-cwf-v3-master-plan
    branch: main
    completed_at: "2026-02-08"
    summary: "Designed CWF v3 architecture with 15-session plan and single-plugin approach"
    artifacts: [master-plan.md, initial-plan-req.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S1
    title: "Refactor critical issues"
    dir: prompt-logs/260208-04-refactor-critical
    branch: main
    completed_at: "2026-02-08"
    summary: "Fixed shebang/strict-mode/eval issues across 6 plugins, established JSON safety patterns"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S2
    title: "Refactor session 2"
    dir: prompt-logs/260208-05-refactor-s2
    branch: main
    completed_at: "2026-02-08"
    summary: "Aligned env var naming to CLAUDE_CORCA_{PLUGIN}_{SETTING} across attention-hook"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md]

  - id: S3
    title: "Ship skill"
    dir: prompt-logs/260208-06-ship-skill
    branch: main
    completed_at: "2026-02-08"
    summary: "Built /ship local skill for GitHub workflow automation with templating system"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S4
    title: "CWF scaffold"
    dir: prompt-logs/260208-04-cwf-scaffold
    branch: main
    completed_at: "2026-02-08"
    summary: "Scaffolded CWF plugin with gate mechanism and 13 source/stub files for hooks"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S4.5
    title: "Ship skill improvements"
    dir: prompt-logs/260208-07-ship-improve
    branch: main
    completed_at: "2026-02-08"
    summary: "Enhanced /ship with Korean PR templates and 2x2 autonomous-merge decision matrix"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S4.6
    title: "SW Factory discussion"
    dir: prompt-logs/260208-08-sw-factory-discussion
    branch: main
    completed_at: "2026-02-08"
    summary: "Applied SW Factory concepts: sernarative review, progressive disclosure, BDD criteria"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S5a
    title: "CWF review — internal reviewers"
    dir: prompt-logs/260208-09-cwf-review-internal
    branch: main
    completed_at: "2026-02-08"
    summary: "Implemented /review skill with 2 internal parallel reviewers (Security, UX/DX)"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md]

  - id: S5b
    title: "CWF review — external reviewers"
    dir: prompt-logs/260208-03-s5b-external-reviewers
    branch: main
    completed_at: "2026-02-08"
    summary: "Expanded /review to 4 reviewers with external CLIs (Codex, Gemini) and provenance format"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S6a
    title: "CWF infra hooks"
    dir: prompt-logs/260208-11-cwf-infra-hooks
    branch: main
    completed_at: "2026-02-08"
    summary: "Migrated 3 simple hooks (check-markdown, smart-read, log-turn) into CWF plugin"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S6b
    title: "CWF hook migration"
    dir: prompt-logs/260208-12-s6b-cwf-migration
    branch: marketplace-v3
    completed_at: "2026-02-08"
    summary: "Migrated attention-hook (5 scripts + 2 utilities) into CWF, added check-shell.sh"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md]

  - id: S7-prep
    title: "Populate cwf-state.yaml + update handoff workflow"
    dir: prompt-logs/260208-13-s7-prep-cwf-state
    branch: marketplace-v3
    completed_at: "2026-02-08"
    summary: "Created machine-readable SSOT for session history, updated handoff template"
    artifacts: [plan.md, lessons.md, next-session.md]

  - id: S7
    title: "Migrate gather-context → cwf:gather"
    dir: prompt-logs/260208-15-s7-cwf-gather-migration
    branch: marketplace-v3
    completed_at: "2026-02-08"
    summary: "Copied gather-context skill into CWF as cwf:gather (8 scripts, 6 references, adapted SKILL.md), activated WebSearch redirect hook"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md, session.md]

  - id: S8
    title: "Migrate clarify → cwf:clarify"
    dir: prompt-logs/260208-16-s8-cwf-clarify-migration
    branch: marketplace-v3
    completed_at: "2026-02-08"
    summary: "Copied clarify skill into CWF as cwf:clarify (SKILL.md + 4 reference files), updated Path A to use cwf:gather search script"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md]

  - id: S9
    title: "Migrate plan-and-lessons → cwf:plan"
    dir: prompt-logs/260208-18-s9-cwf-plan
    branch: marketplace-v3
    completed_at: "2026-02-08"
    summary: "Created cwf:plan skill with 2-agent research + synthesizer pattern, synced plan-protocol.md Handoff Document section"
    artifacts: [plan.md, lessons.md, retro.md, next-session.md]

# External tool availability (detected by cwf:setup)
tools:
  codex: available
  gemini: available
  tavily: unknown
  exa: unknown

# Hook group toggle state (mirrors ~/.claude/cwf-hooks-enabled.sh)
# Default: all enabled — hooks work without cwf:setup
hooks:
  attention: true
  log: true
  read: true
  lint_markdown: true
  lint_shell: true
  websearch_redirect: true
  plan_protocol: true
