# 초기 요청 및 클래리파이 기록

## 원문 요청 (verbatim)

```text
퍼블릭 배포 전 점검 중입니다. cwf 설치 및 셋업부터 시작해 실제 유저가 별도 레포에서 이 플러그인을 처음 쓰기 시작했을 때 상황에 따라 어떤 일을 겪게 되는지, 모든 케이스 및 설정에 따른 유저 시나리오 분기들을, 스킬을 실제로 하나씩 로드해가면서 검토해주세요. (훅 동작도 마찬가지) 대략 이렇게 합니다.

전체 시나리오를 마스터 파일 하나에 모두 나열한 다음, project 폴더/iter1/scenarios 안에 시나리오별로 파일 하나씩 스크래치패드에 기록하며 진행. 토큰 많이 들어도 되니(gemini 와 claude non-interactive mode 서브에이전트 적극적으로 써주세요) 실제로 시뮬레이션해보고, 의도와 다르게 동작하는 게 드러나면 해당 경로는 멈추고 해당 시나리오 파일과 마스터 파일에 기록만 해주세요. (시나리오와 마스터는 저도 읽을 거라서 한글로) 그런 식으로 전체 시나리오 검토. (앞선 시나리오 검토하면서 뻔하게 뒤에서 틀릴 게 나오면 그건 스킵) 검토 다 하면 종합해서 개선 계획 cwf:plan 후 plan review, 구현, 구현 리뷰, 리팩터, 그리고 retro 해서 persist 할 걸 합니다.
그리고 새 이터레이션: 다시 마스터 파일에서 시작해서(시나리오 자체에 변경이 있었다면 마스터 파일 재작성), 지난 이터레이션 레슨과 리트로 참고하여 반복. 이렇게 모든 시나리오가 통과할 때까지 계속합니다.
이터레이션별로, 마스터 기준으로 어떤 프로그레스가 있었는지 정리한 문서를 만들고, 마지막에 전체 프로그레스 종합 리포트를 제가 읽으려고 합니다.

의도 이해하셨나요? 이 요청에 대해 모호한 점이 있으면 clarify 하고 시작합시다. 이 요청 자체(+ 초기 클래리파이 된 결과)를 initial-req.md 같은 데 저장해두고, 중간에 의사결정 필요할 때 "철학"같은 느낌으로 참고하세요. 시작할때, 그리고 중간중간 제가 도와줄 게 있으면 멈추고 말해주세요. 적절한 단위로 커밋하면서 진행.
```

## 확정 운영 원칙

- 마스터 시나리오 파일 1개 + [project/iter1/scenarios](iter1/scenarios) 개별 시나리오 파일 구조
- 시나리오/마스터 문서는 한글 작성
- 실제 시뮬레이션 기반 검토 수행
- 의도와 다르게 동작한 경로는 중단 후 기록만 남김
- 앞 시나리오에서 후속 실패가 명백한 경로는 스킵 가능
- 이터레이션 단위 프로그레스 문서 생성 + 마지막 종합 리포트 생성
- 중간 의사결정 필요 시 사용자 확인
- 적절한 단위로 커밋
- 설치/셋업 검증에서 끝내지 않고 cwf:run(또는 전체 스킬 체인) 실제 실행 검증 포함

## 1차 결정 포인트

1. 이번 턴 목표 범위
   - A: Iteration 1(시나리오 전수 + 문제 기록)
   - B: Iteration 1 + 개선 사이클(Plan/Review/Impl/Review/Refactor/Retro)
   - C: 가능한 만큼 연속 반복(다중 iteration)
2. 시뮬레이션 대상 레포 구성
   - A: 임시 샌드박스 레포 생성 후 신규 사용자 설치 흐름 재현
   - B: 현재 레포 내부 모의 경로/문서 기반 시뮬레이션
   - C: 둘 다 수행(샌드박스 우선)
3. 외부 서브에이전트 정책
   - 기본값: codex spawn_agent + 로컬 CLI(gemini/claude) 사용 가능 여부 탐지 후 가능한 채널 모두 사용
   - 미설치/인증 실패 시: 즉시 기록 후 대체 경로 진행

## 잠정 기본값

- 목표 범위: B
- 시뮬레이션 대상: C
- 외부 서브에이전트: 가능한 채널 전부 시도, 실패 시 대체

## 2차 클래리파이 결과 (2026-02-19)

- 사용자 추가 요구 반영: 설치/셋업 외 cwf:run(또는 전체 스킬 체인) 실제 실행 검증 필수
- 진행 정책: 미배포 상태에서 가능한 검증을 최대한 수행하고, 공개 배포/머지 이후에만 검증 가능한 경로는 후속 iteration으로 이관 가능
- 운영 편차 승인: 공개 marketplace 설치 blocker 발생 시 검증 지속을 위해 plugin-dir 우회 경로 사용
