# I1-H37 attention/log smoke

## 목적

`Notification(idle_prompt)`의 attention 훅과 `Stop`의 log-turn 훅이 기본 스모크 경로에서 실행되는지 검증한다.

## 실행 일시

2026-02-19

## 실행 환경

- 실행 스크립트:
  - [attention.sh](../../../plugins/cwf/hooks/scripts/attention.sh)
  - [log-turn.sh](../../../plugins/cwf/hooks/scripts/log-turn.sh)
- 실행 로그: [project/iter1/artifacts/I1-H37.log](../artifacts/I1-H37.log)
- 임시 git repo: 시스템 임시 디렉터리 테스트 저장소(cwf-h37)
- transcript: 테스트 저장소 내 transcript jsonl 파일

## 재현 명령

```bash
jq -nc --arg sid 'sess-h37-smoke' --arg tr '/tmp/cwf-h37-XfQ7/transcript.jsonl' --arg cwd '/tmp/cwf-h37-XfQ7' '{session_id:$sid,transcript_path:$tr,cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/log-turn.sh

jq -nc --arg sid 'sess-h37-smoke' '{session_id:$sid,tool_name:"idle_prompt"}' \
  | bash plugins/cwf/hooks/scripts/attention.sh
```

## 관찰 결과

- log-turn:
  - `exit_code=0`, 출력 없음
  - 세션 로그 파일 생성 확인: 테스트 저장소 내 `.cwf/sessions/*.claude.md`
  - 생성 파일에 `Turn 1`, user/assistant 텍스트, token 요약 기록 확인
- attention:
  - `exit_code=0`, 출력 없음
  - debug tail 기준 호출/전송 경로 수행 확인 (`attention.sh called`, `slack_send parent ...`)

## 판정

- 상태: PASS
- 결론: attention/log 훅의 기본 스모크 경로 실행 확인.

## 비고

- attention 훅은 로컬 환경의 Slack 설정 상태에 따라 외부 API 호출이 발생할 수 있다.
