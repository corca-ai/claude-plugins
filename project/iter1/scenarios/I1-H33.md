# I1-H33 markdown/link lint gate 분기

## 목적

`PostToolUse(Write|Edit)`에서 markdown lint와 link lint 게이트가 각각 block/allow 분기로 동작하는지 검증한다.

## 실행 일시

2026-02-19

## 실행 환경

- 실행 스크립트:
  - [check-markdown.sh](../../../plugins/cwf/hooks/scripts/check-markdown.sh)
  - [check-links-local.sh](../../../plugins/cwf/hooks/scripts/check-links-local.sh)
- 실행 로그: [project/iter1/artifacts/I1-H33.log](../artifacts/I1-H33.log)
- 임시 git repo: 시스템 임시 디렉터리에서 생성한 테스트 저장소(cwf-h33)

## 재현 명령

```bash
jq -nc --arg p '/tmp/cwf-h33-RtVp/bad_markdown.md' --arg cwd '/tmp/cwf-h33-RtVp' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/check-markdown.sh

jq -nc --arg p '/tmp/cwf-h33-RtVp/good_markdown.md' --arg cwd '/tmp/cwf-h33-RtVp' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/check-markdown.sh

jq -nc --arg p '/tmp/cwf-h33-RtVp/broken_link.md' --arg cwd '/tmp/cwf-h33-RtVp' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/check-links-local.sh

jq -nc --arg p '/tmp/cwf-h33-RtVp/valid_link.md' --arg cwd '/tmp/cwf-h33-RtVp' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/check-links-local.sh
```

## 관찰 결과

- Markdown block: `exit_code=0`, `{"decision":"block"...}` 반환
  - 핵심 오류: MD041 first-line-heading
- Markdown allow: `exit_code=0`, 출력 없음
- Link block: `exit_code=0`, `{"decision":"block"...}` 반환
  - 핵심 오류: `Cannot find file: .../missing-target.md`
- Link allow: `exit_code=0`, 출력 없음

## 판정

- 상태: PASS
- 결론: markdown/link lint 게이트의 block/allow 분기가 모두 재현됨.
