# Agent Operating Guide

Compressed cross-runtime index for repository agents. Keep stable invariants here; keep implementation detail in scoped docs.

## Operating Invariants

- Prioritize task-level goals over local optimizations. Choose execution details autonomously.
- The user communicates in Korean. Respond in Korean for conversation and English for code/docs (unless explicitly requested otherwise).
- If implementation diverges from a pre-designed plan, record the discrepancy in session lessons, report it immediately, and ask for a user decision before proceeding.
- Never delete user-created files without explicit confirmation. Prefer `mv` over `rm`.
- For design decisions, surface meaningful alternatives with trade-offs and incorporate user-provided external references before concluding.
- Deterministic checks are authoritative; behavioral reminders are secondary. Operational details live in [plugins/cwf/hooks/hooks.json](plugins/cwf/hooks/hooks.json), [docs/plugin-dev-cheatsheet.md](docs/plugin-dev-cheatsheet.md), and [scripts/check-session.sh](scripts/check-session.sh).

## Managed CWF Index

Document roles and navigation map are maintained in this managed block. Update via [cwf:setup](plugins/cwf/skills/setup/SKILL.md).

<!-- CWF:INDEX:START -->
> Generated by `cwf:setup --index --target agents|both`.

### Root

- **Role**: Repository entry surface for user-facing overview, runtime adapters, and live session state.
- **Key files**:
  - [README.md](README.md): Repository overview and install/update entry.
  - [README.ko.md](README.ko.md): Korean mirror of the repository overview.
  - [cwf-state.yaml](cwf-state.yaml): Live workflow state and stage checkpoints (SSOT).
  - [AGENTS.md](AGENTS.md): Cross-runtime invariants and routing map.
  - [CLAUDE.md](CLAUDE.md): Claude-runtime adapter and runtime-specific deltas.

### plugins

- **Role**: CWF implementation surface where skills, hooks, and shared references define agent behavior.
- **Key files**:
  - [plugins/cwf/skills/setup/SKILL.md](plugins/cwf/skills/setup/SKILL.md): Setup workflow and index generation policy.
  - [plugins/cwf/skills/review/SKILL.md](plugins/cwf/skills/review/SKILL.md): Multi-review orchestration and verdict policy.
  - [plugins/cwf/skills/run/SKILL.md](plugins/cwf/skills/run/SKILL.md): End-to-end workflow chaining semantics.
  - [plugins/cwf/hooks/hooks.json](plugins/cwf/hooks/hooks.json): Deterministic hook registrations.
  - [plugins/cwf/hooks/scripts/cwf-hook-gate.sh](plugins/cwf/hooks/scripts/cwf-hook-gate.sh): Runtime gate logic for hook toggles.

### scripts

- **Role**: Deterministic automation and validation utilities for install/update, session hygiene, and docs analysis.
- **Key files**:
  - [scripts/install.sh](scripts/install.sh): Main install and synchronization entrypoint.
  - [scripts/update-all.sh](scripts/update-all.sh): Bulk update workflow across managed artifacts.
  - [scripts/check-session.sh](scripts/check-session.sh): Session completeness and consistency checks.
  - [scripts/check-links.sh](scripts/check-links.sh): Link-validation wrapper used in docs checks.
  - [scripts/doc-graph.mjs](scripts/doc-graph.mjs): Documentation graph and orphan analysis.

### docs

- **Role**: Stable project knowledge: org context, architecture patterns, documentation standards, and migration decisions.
- **Key files**:
  - [docs/project-context.md](docs/project-context.md): Project/org facts and long-lived conventions.
  - [docs/architecture-patterns.md](docs/architecture-patterns.md): Implementation and integration patterns.
  - [docs/documentation-guide.md](docs/documentation-guide.md): Documentation quality principles and scope rules.
  - [docs/v3-migration-decisions.md](docs/v3-migration-decisions.md): Decision rationale and migration history.
  - [docs/plugin-dev-cheatsheet.md](docs/plugin-dev-cheatsheet.md): Practical development/testing/deploy workflows.

### references

- **Role**: Conceptual foundations for shared design/review language across skills.
- **Key files**:
  - [references/essence-of-software/distillation.md](references/essence-of-software/distillation.md): Core concept distillation used by review and design docs.

### assets

- **Role**: Image assets used by repository docs and hook behavior explanations.
- **Key files**:
  - [assets/attention-hook-AskUserQuestion.png](assets/attention-hook-AskUserQuestion.png): Attention-hook AskUserQuestion behavior screenshot.
  - [assets/attention-hook-normal-response.png](assets/attention-hook-normal-response.png): Attention-hook normal-response screenshot.
  - [assets/g-export-sheet-md-example.png](assets/g-export-sheet-md-example.png): Example sheet export artifact used in docs.
<!-- CWF:INDEX:END -->
