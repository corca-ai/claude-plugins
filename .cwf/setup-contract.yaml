version: 1
generated_at_utc: "2026-02-24T00:15:50Z"
mode: "advisory"

policy:
  core_tools_required: true
  repo_tools_opt_in: true
  hook_index_coverage_mode: "authoring-only"

hook_extensions:
  pre_push:
    path: ""
    required: false

core_tools:
  - name: "shellcheck"
    required: true
    reason: "Shell lint gates in hooks and post-run checks."
    install_hint: "brew install shellcheck OR sudo apt-get install -y shellcheck"
  - name: "jq"
    required: true
    reason: "JSON parsing for hooks and skill scripts."
    install_hint: "brew install jq OR sudo apt-get install -y jq"
  - name: "gh"
    required: true
    reason: "GitHub automation in ship/release workflows."
    install_hint: "brew install gh OR sudo apt-get install -y gh"
  - name: "node"
    required: true
    reason: "Node runtime for JavaScript utilities and lint tooling."
    install_hint: "brew install node OR sudo apt-get install -y nodejs npm"
  - name: "python3"
    required: true
    reason: "Python runtime used by repository helper scripts."
    install_hint: "brew install python OR sudo apt-get install -y python3"
  - name: "lychee"
    required: true
    reason: "Deterministic Markdown link checks in refactor/docs workflows."
    install_hint: "brew install lychee OR sudo apt-get install -y lychee"
  - name: "markdownlint-cli2"
    required: true
    reason: "Deterministic Markdown lint checks in hooks and post-run checks."
    install_hint: "npm install -g markdownlint-cli2"

repo_tools:
  - name: "yq"
    required: false
    reason: "Detected in repository-local automation scripts."
    install_hint: "brew install yq OR sudo apt-get install -y yq"
    evidence:
      - "plugins/cwf/scripts/check-portability-fixtures.sh"
      - "plugins/cwf/scripts/provenance-check.sh"
      - "plugins/cwf/skills/setup/scripts/bootstrap-setup-contract.sh"
      - "plugins/cwf/skills/setup/scripts/check-setup-contract-runtime.sh"
      - "plugins/cwf/skills/setup/scripts/install-tooling-deps.sh"
      - "scripts/check-schemas.sh"
  - name: "rg"
    required: false
    reason: "Detected in repository-local automation scripts."
    install_hint: "brew install ripgrep OR sudo apt-get install -y ripgrep"
    evidence:
      - "plugins/cwf/scripts/check-growth-drift.sh"
      - "plugins/cwf/scripts/check-shared-reference-conformance.sh"
      - "plugins/cwf/scripts/codex/post-run-checks.sh"
      - "plugins/cwf/scripts/codex/verify-skill-links.sh"
      - "plugins/cwf/scripts/retro-coverage-contract.sh"
      - "plugins/cwf/skills/setup/scripts/bootstrap-setup-contract.sh"
  - name: "realpath"
    required: false
    reason: "Detected in repository-local automation scripts."
    install_hint: "brew install coreutils OR sudo apt-get install -y coreutils"
    evidence:
      - "plugins/cwf/scripts/check-session-lib.sh"
      - "plugins/cwf/scripts/codex/verify-skill-links.sh"
      - "plugins/cwf/skills/setup/scripts/bootstrap-setup-contract.sh"
  - name: "perl"
    required: false
    reason: "Detected in repository-local automation scripts."
    install_hint: "brew install perl OR sudo apt-get install -y perl"
    evidence:
      - "plugins/cwf/hooks/scripts/log-turn-lib.sh"
      - "plugins/cwf/hooks/scripts/log-turn.sh"
      - "plugins/cwf/scripts/codex/redact-jsonl.sh"
      - "plugins/cwf/scripts/codex/redact-session-logs.sh"
      - "plugins/cwf/scripts/codex/sync-session-logs-lib.sh"
      - "plugins/cwf/skills/gather/scripts/slack-to-md.sh"
      - "plugins/cwf/skills/setup/scripts/bootstrap-setup-contract.sh"
      - "plugins/cwf/skills/setup/scripts/check-index-coverage.sh"
      - "plugins/cwf/skills/setup/scripts/configure-git-hooks.sh"
      - "plugins/cwf/skills/setup/scripts/install-tooling-deps.sh"

notes:
  - "Auto-generated by setup contract bootstrap."
  - "Review repo_tools and approve only repository-specific tools you want setup to manage."
  - "Use hook_extensions.pre_push.path to run repo-local pre-push policy without editing generated hooks."
  - "Core tools are the deterministic baseline for cwf hooks/refactor workflows."
