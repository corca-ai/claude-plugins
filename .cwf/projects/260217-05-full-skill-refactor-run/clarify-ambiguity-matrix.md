# Strict Ambiguity Matrix
| Decision ID | Topic | Options | Recommended | Blocking | Rationale |
| D1 | Review gate contract | A) Let `cwf:review` persist a verdict+confidence note and have `cwf:run` read that helper result before deciding to rerun. B) Keep `cwf:run` re-triggering `review-code` with `AskUserQuestion` and its own gate enforcement. | A | Yes | Duplicated gate state between `run` and `review` blocks deployment when inconsistent; trusting the review skill as the source of truth keeps pre-deploy gating deterministic and avoids contradictory instructions. |
| D2 | `/ship merge` stage gate | A) Always invoke `check-run-gate-artifacts --stage ship` (and related hooks) regardless of invocation path. B) Limit the gate requirement to `cwf:run` and accept that manual `/ship merge` may skip it. | A | Yes | A gate that can be bypassed during manual merges undermines the deterministic ship stage; enforcing the script everywhere preserves the safe pre-deploy contract. |
| D3 | Unresolved-item metadata | A) Require canonical structured markers (front matter or fenced `Unresolved` blocks) in `clarify`, `plan`, and `lessons` outputs so downstream handoff parsing is deterministic. B) Continue relying on keyword heuristics scattered across documents. | A | Yes | Missing or malformed unresolved items directly drops scope between sessions; structured metadata keeps the pre-deploy refactor traceable and guardable. |
| D4 | Context-recovery registry | A) Publish a shared manifest/helper listing each skill’s critical artifacts, validation rules, and retry expectations and have gather/clarify/plan/handoff call it. B) Let each skill keep its own ad-hoc context-recovery checks. | A | Yes | Inconsistent artifact validation causes drift before implementation; a shared registry ensures every gate checks the same files, which keeps safe refactor readiness. |
| D5 | Plan→handoff handshake | A) Have `plan` mark the session as ready for `handoff` (e.g., update `cwf-state` or touch a `ready-for-handoff` flag/call) once its persistence gate passes. B) Defer the handshake to manual follow-up and optional `cwf:handoff --phase` invocations. | A | Yes | Without an explicit signal, unresolved scope or artifacts can skip downstream skills, which blocks safe deployment; automating the handshake ensures deterministic stage transitions. |
