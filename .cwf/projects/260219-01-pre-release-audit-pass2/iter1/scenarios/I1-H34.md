# I1-H34 `check-shell` shellcheck present/missing 분기

## 목적

`PostToolUse(Write|Edit)` shell lint 훅에서 `shellcheck` 존재 시 block, 미존재 시 skip(allow)되는지 검증한다.

## 실행 일시

2026-02-19

## 실행 환경

- 실행 스크립트: [check-shell.sh](../../../plugins/cwf/hooks/scripts/check-shell.sh)
- 실행 로그: [.cwf/projects/260219-01-pre-release-audit-pass2/iter1/artifacts/I1-H34.log](../artifacts/I1-H34.log)
- 임시 git repo: 시스템 임시 디렉터리에서 생성한 테스트 저장소(cwf-h34)

## 재현 명령

```bash
jq -nc --arg p '/tmp/cwf-h34-WjTc/bad.sh' --arg cwd '/tmp/cwf-h34-WjTc' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | bash plugins/cwf/hooks/scripts/check-shell.sh

PATH='/usr/bin:/bin' jq -nc --arg p '/tmp/cwf-h34-WjTc/bad.sh' --arg cwd '/tmp/cwf-h34-WjTc' '{tool_input:{file_path:$p},cwd:$cwd}' \
  | PATH='/usr/bin:/bin' bash plugins/cwf/hooks/scripts/check-shell.sh
```

## 관찰 결과

- Case A (`shellcheck` present): `exit_code=0`, `{"decision":"block"...}` 반환
  - 핵심 오류: `SC1049`, `SC1073`, `SC1050`, `SC1072`
- Case B (`shellcheck` missing via PATH 제한): `exit_code=0`, 출력 없음 (`skip-or-allow`)

## 판정

- 상태: PASS
- 결론: shellcheck 유무 분기가 의도대로 재현됨.
